import{j as e,E as y,y as p,P as l,f as w,K as F,N as P,O as D,Q as z,V as S,o as A}from"./ui-B5PjYYeE.js";import{r as o,L as i}from"./vendor-qOmVjXE-.js";import{m as E,u as O,V as c}from"./index-DBuhCPqP.js";import{u as m}from"./useMutation-MTKIpc2f.js";import{u as k,d as C,g as I}from"./featuredProductService-uRl-Kk3A.js";const $=()=>{const d=E(),[L,Q]=o.useState(null),[a,x]=o.useState(!1),{data:t,isLoading:u,error:h}=O({queryKey:["featuredProducts",a],queryFn:()=>I()}),g=m({mutationFn:C,onSuccess:()=>{d.invalidateQueries(["featuredProducts"]),c.success("Featured product deleted successfully")},onError:s=>{c.error(s.message||"Failed to delete featured product")}}),f=m({mutationFn:({id:s,order:r})=>k(s,r),onSuccess:()=>{d.invalidateQueries(["featuredProducts"])}}),b=async s=>{if(window.confirm("Are you sure you want to delete this featured product?"))try{await g.mutateAsync(s)}catch(r){console.error("Error deleting featured product:",r)}},n=async(s,r,j)=>{const N=j==="up"?r-1:r+1;try{await f.mutateAsync({id:s,order:N})}catch(v){console.error("Error updating order:",v)}};return u?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):h?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"text-red-500",children:"Error loading featured products"})}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Featured Products"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Manage products featured on your homepage"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>x(!a),className:"flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all duration-200",children:[a?e.jsx(y,{size:20,className:"mr-2"}):e.jsx(p,{size:20,className:"mr-2"}),a?"Hide Inactive":"Show Inactive"]}),e.jsxs(i,{to:"/admin/featured-products/new",className:"flex items-center px-5 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all duration-200 shadow-md hover:shadow-lg",children:[e.jsx(l,{size:20,className:"mr-2"}),"Add Featured Product"]})]})]}),(t==null?void 0:t.length)===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[e.jsx(w,{size:48,className:"mx-auto text-gray-300 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No Featured Products"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Start by adding your first featured product"}),e.jsxs(i,{to:"/admin/featured-products/new",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all duration-200",children:[e.jsx(l,{size:18,className:"mr-2"}),"Add Featured Product"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t==null?void 0:t.map(s=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden hover:shadow-md transition-all duration-200",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.featuredImage||s.image,alt:s.featuredTitle||s.name,className:"w-full h-48 object-cover"}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${s.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.isActive?"Active":"Inactive"})})]}),e.jsxs("div",{className:"p-5",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:s.featuredTitle||s.name}),e.jsx("p",{className:"text-gray-500 text-sm mb-4 line-clamp-2",children:s.featuredDescription||s.description}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-4",children:[e.jsx(F,{size:16,className:"mr-1.5"}),e.jsxs("span",{children:[s.startDate?new Date(s.startDate).toLocaleDateString():"No start date"," -",s.endDate?new Date(s.endDate).toLocaleDateString():"No end date"]})]}),s.link&&e.jsxs("div",{className:"flex items-center text-sm text-blue-600 mb-4",children:[e.jsx(P,{size:16,className:"mr-1.5"}),e.jsx("span",{className:"truncate",children:s.link})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>n(s._id,s.featuredOrder,"up"),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-md transition-colors duration-200",disabled:s.featuredOrder===0,children:e.jsx(D,{size:18})}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Order: ",s.featuredOrder]}),e.jsx("button",{onClick:()=>n(s._id,s.featuredOrder,"down"),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-md transition-colors duration-200",children:e.jsx(z,{size:18})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(i,{to:`/admin/featured-products/${s._id}/edit`,className:"p-1.5 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-md transition-colors duration-200",title:"Edit",children:e.jsx(S,{size:18})}),e.jsx("button",{onClick:()=>b(s._id),className:"p-1.5 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-md transition-colors duration-200",title:"Delete",children:e.jsx(A,{size:18})})]})]})]})]},s._id))})]})};export{$ as default};
