import{j as e,d as N,x as m,E as u,y as p}from"./ui-B5PjYYeE.js";import{i as P,u as k,r,L as i}from"./vendor-qOmVjXE-.js";import{P as f,V as a,r as C}from"./index-DBuhCPqP.js";const q=()=>{const[h]=P(),o=h.get("oobCode"),w=k(),[s,g]=r.useState({password:"",confirmPassword:""}),[d,c]=r.useState(!1),[n,b]=r.useState(!1),[l,y]=r.useState(!1),x=t=>{g({...s,[t.target.name]:t.target.value})},j=async t=>{if(t.preventDefault(),!o){a.error("Invalid reset link. Please request a new password reset.");return}if(s.password!==s.confirmPassword){a.error("Passwords do not match");return}if(s.password.length<8){a.error("Password must be at least 8 characters long");return}c(!0);try{await C(o,s.password),a.success("Password has been reset successfully"),w("/login")}catch(v){a.error(v.message||"Failed to reset password")}finally{c(!1)}};return o?e.jsx(f,{children:e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:[e.jsx(i,{to:"/login",className:"absolute top-4 left-4 p-2 text-[#39b54a] hover:text-[#2d8f3a] transition-colors duration-200",children:e.jsx(N,{className:"w-6 h-6"})}),e.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-2xl shadow-xl",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Set new password"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Please enter your new password below."})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:j,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(m,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"password",name:"password",type:n?"text":"password",required:!0,className:"appearance-none block w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-[#39b54a] focus:border-[#39b54a] focus:z-10 sm:text-sm",placeholder:"New password",value:s.password,onChange:x}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx("button",{type:"button",onClick:()=>b(!n),className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:n?e.jsx(u,{className:"h-5 w-5"}):e.jsx(p,{className:"h-5 w-5"})})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(m,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:l?"text":"password",required:!0,className:"appearance-none block w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-[#39b54a] focus:border-[#39b54a] focus:z-10 sm:text-sm",placeholder:"Confirm new password",value:s.confirmPassword,onChange:x}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx("button",{type:"button",onClick:()=>y(!l),className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:l?e.jsx(u,{className:"h-5 w-5"}):e.jsx(p,{className:"h-5 w-5"})})})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:d,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-[#39b54a] hover:bg-[#2d8f3a] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#39b54a] disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:d?"Resetting...":"Reset password"})}),e.jsx("div",{className:"text-center",children:e.jsx(i,{to:"/login",className:"font-medium text-[#39b54a] hover:text-[#2d8f3a]",children:"Back to login"})})]})]})]})}):e.jsx(f,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-2xl shadow-xl text-center",children:[e.jsx("h2",{className:"text-3xl font-extrabold text-gray-900",children:"Invalid Reset Link"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"This password reset link is invalid or has expired. Please request a new password reset."}),e.jsx("div",{className:"mt-6",children:e.jsx(i,{to:"/forgot-password",className:"text-[#39b54a] hover:text-[#2d8f3a] font-medium",children:"Request new password reset"})})]})})})};export{q as default};
